{% extends "Token/index.twig" %}

    {% block header %}

    <style type="text/css">
        .tableCell {
            width: 48%;
            display: table-cell;
            padding: 10px;
        }
        .tableRow {
            width: 800px;
            display: table-row;
        }
        p {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 14px;
            font-weight: bold;
            color: #333;
            margin-top: 5px;
            margin-right: 0px;
            margin-bottom: 8px;
            margin-left: 0px;
        }
        .table {
            display: table;
            width: 800px;
            padding: 5px;
            margin: 0px;
        }
        .inputText {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
            width: 100%;
        }
        .inputTextarea {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
            height: 280px;
            width: 100%;
        }
        label {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
        }
    </style>


        {{ parent() }}
    {% endblock %}



    {% block body %}

    <h1>OpenPay Javascript API Library Test</h1>

    <div class="table">
        <div class="tableRow">
            <div class="tableCell">
                <p>Mode:</p>
                <select id="mode" class="inputSelect disableOnSubmit">
                    <option value="true">Sandbox</option>
                    <option value="false">Production</option>
                </select>
            </div>
        </div>
        <div class="tableRow">
            <div class="tableCell">
                <p>Merchant ID:</p>
                <input type="text" class="inputText disableOnSubmit" id="id" value="mfd2pqjabubndytsbea1" size="50" />
            </div>
            <div class="tableCell">
                <p>Request API Key:</p>
                <input type="text" class="inputText disableOnSubmit" id="apiKey" value="pk_b23491f8eebe402e8d2f981001552c3c" size="50" />
            </div>
        </div>
    </div>

    <div class="table">
        <form id="openpayForm">
            <fieldset>
                <legend>SessionId</legend>
                <div class="tableRow">
                    <div class="tableCell">
                        <p>Generated Session Id: <span id="deviceId"></span></p>
                    </div>
                </div>
                <div class="tableRow">
                    <div class="tableCell">
                        <p>Hidden value:</p>
                        <input type="text" class="inputText disableOnSubmit" id="deviceSessionId" size="50"/>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>

    {% endblock %}


    {% block js %}
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script src="/js/jquery-ui-1.11.4.custom/external/jquery/jquery.js"></script>
        <script src="/js/openpay.v1.js"></script>
        <script src="/js/openpay-data.v1.js"></script>

        <script type="text/javascript">
            $(document).ready(function(){
                OpenPay.setSandboxMode(true);
                // Setup Form after calling setSandboxMode
                var deviceDataId = OpenPay.deviceData.setup("openpayForm", "deviceIdField");
                //var deviceDataId = OpenPay.deviceData.setup();

                $('#deviceId').text(deviceDataId);
                $('#deviceSessionId').val($('#deviceIdField').val());
            });
        </script>

    {% endblock %}
